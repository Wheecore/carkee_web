"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var FinanceLoanMobileSort=function(){function e(){_classCallCheck(this,e),this.triggerBinder=$(".js-loan-mobile-sort__trigger"),this.triggerPanel=$(".js-loan-mobile-sort"),this.triggerClose=$(".js-loan-mobile-sort__close")}return _createClass(e,[{key:"sortOpen",value:function(){this.triggerPanel.removeClass("hidden")}},{key:"sortClose",value:function(){this.triggerPanel.addClass("hidden")}},{key:"showOverlay",value:function(){$(".smenu__overlay").length||$("body").append('<div class="smenu__overlay"></div>')}},{key:"hideOverlay",value:function(){$(".smenu__overlay").length&&$(".smenu__overlay").remove()}},{key:"init",value:function(){var e=this;this.triggerBinder.on("click",(function(t){t.preventDefault(),e.sortOpen(),e.showOverlay()})),this.triggerClose.on("click",(function(t){t.preventDefault(),e.sortClose(),e.hideOverlay()}))}}]),e}();$(document).ready((function(){function e(){var e=$('input[name="type"]:checked'),t=$('input[name="year"]').closest(".grid");"new"===e.val()?(t.hide(),$('input[name="year"]').removeClass("js-form-element-required")):(t.show(),$('input[name="year"]').addClass("js-form-element-required"))}function t(t){var o;t.length&&(t.find("input, select").change((function(){var t,o,n=$(this);($(this).attr("data-error-target")?$("#"+n.attr("data-error-target")):$(this).removeClass("input--error").parent().find('*[role="alert"]')).addClass("visuallyhidden"),"type"===$(this).attr("name")&&e(),"make"===$(this).attr("name")&&(t=$('select[name="make"]'),o=$('select[name="model"]'),n=$('input[name="vehicle_type"]'),o.length&&o.removeAttr("disabled"),o[0].selectize.clearOptions(),o[0].selectize.disable(),$.getJSON("/finance/brand-models?make="+t.val()+"&vehicle_type="+n.val()).success((function(e){if(e.models)for(var t in e.models)o[0].selectize.addOption({value:t,text:e.models[t]}),o[0].selectize.enable()})))})),t.find('input[name="phone"]').on("keyup",(function(e){var t;this.value.match(/^\d*$/)||(t=this.value.match(/\d+/g),this.value=t?t.join(""):"")})),t.submit((function(e){var o,n,a=!0,s={},i=t.find(":not(.js-not-required)").serializeArray(),d={};for(o in Form.toggleFormActionButton(t.find("[type=submit]"),!1),i)d[i[o].name]=i[o].value;for(o in d.model=d.model||!1,d){var r=$('input[name="'+o+'"]',t);d[o]||r.length&&!r.is(":visible")||(a=!(s[o]="This field is required"))}if(n=d.email,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())||(a=!(s.email="Email is not correct")),d.terms&&"on"===d.terms||(a=!(s.terms="You should accept agreement")),!(a=d.document&&"on"===d.document?a:!(s.document="You should accept document"))){for(o in s){var l=t.find('*[name="'+o+'"]');l.addClass("input--error"),(l.attr("data-error-target")?$("#"+l.attr("data-error-target")):l.parent().find('*[role="alert"]')).removeClass("visuallyhidden")}return Form.toggleFormActionButton(t.find("[type=submit]"),!0),e.preventDefault(),!1}})),(o=$('select[name="model"]')).length&&o.val()&&o[0].selectize.enable())}$(".js-insurance").length?(t($("#insurance-form")),e()):$(".finance").length&&(t($("#loan-form")),window.sortBanksList=function(e,t){var o=$(".finance-result");o.find(".finance-result__table").sort((function(o,n){return o=+o.dataset[e],n=+n.dataset[e],"desc"===t?o-n:n-o})).appendTo(o)},$(".btn-sort").click((function(e){e.preventDefault();var t=$(this).attr("data-sort");e=$(this).attr("data-sort-dir");t&&e&&(e="asc"===e?"desc":"asc",$(this).closest(".finance-result__head").find("a>.toggler__icon").removeClass("icon--up-dir").removeClass("icon--down-dir").addClass("icon--down-dir"),$(this).attr("data-sort-dir",e),$(this).find(".toggler__icon").removeClass("icon--down-dir").removeClass("icon--up-dir").removeClass("visuallyhidden").addClass("icon--"+("asc"===e?"down":"up")+"-dir"),window.sortBanksList(t,e))})),$(".js-loan-mobile-sort").find(".sorts__menu a").click((function(e){e.preventDefault();var t=$(this),o=t.closest(".sorts__menu"),n=t.attr("data-sort");e=t.attr("data-sort-dir");o.find("li.li--selected").removeClass("li--selected"),t.parent().addClass("li--selected"),window.sortBanksList(n,e)})))})),$((function(){console.log("window.iCarCTRMethod",window.iCarCTRMethod),window.iCarCTRMethod&&(iCarCTRMethod.getWhatsapp=function(){var e=JSON.parse(iCarFunctions.decrypt(iCarCTR.attributes.phones));return Object.keys||(Object.keys=function(e){var t,o=[];for(t in e)e.hasOwnProperty(t)&&o.push(t);return o}),Object.keys(e)});var e=$(".js-modal-au");!$.cookie("carlist-uwp476-shown")&&e.length&&(setTimeout((function(){e.bPopup({modalClose:!1,positionStyle:"fixed",position:["auto","10%"],onOpen:function(){e.removeClass("visuallyhidden"),$(".js-modal-au  .c-dialog").addClass("u-block"),$("body").addClass("no--overflow"),window.iCarWidgets.popup.onOpen("js-modal-au")},onClose:function(){"undefined"!==$.cookie("carlist-uwp476-shown")&&$.cookie("carlist-uwp476-shown")||$.cookie("carlist-uwp476-shown",!0,{expires:1,path:"/"}),$("body").removeClass("no--overflow"),e.addClass("visuallyhidden"),window.iCarWidgets.popup.onClose()}})}),5100),$(".js-au-clicked").click((function(){"undefined"!==$.cookie("carlist-uwp476-shown")&&$.cookie("carlist-uwp476-shown")||$.cookie("carlist-uwp476-shown",!0,{expires:1,path:"/"})}))),console.log("lazy init..");var t=document.querySelectorAll("img[data-src],div[data-background-image],picture"),o=lozad(t);t=lozad(".icar-lzy-bg",{threshold:.1});o.observe(),t.observe()})),window.onload=function(e){var t=$(".js-ncsr-ads-desktop");!t.length||(o=t.parents(".three-tenths")).siblings(".grid__item").height()>o.height()&&(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((function(){console.log("googletag.pubadsReady",googletag.pubadsReady),googletag.pubadsReady?(StickyDFP.manual({element:t,offset:10,parent:".container"}),t.data("stickied",!0)):googletag.pubads().addEventListener("slotRenderEnded",(function(e){t.data("stickied")||t.find("#"+e.slot.getSlotElementId()).length&&(StickyDFP.manual({element:t,offset:10,parent:".container"}),t.data("stickied",!0))}))})));var o=function(){var e=new Date;e.setTime(e.getTime()+26784e5),$.cookie("noLanguageRedirect","true",{path:"/",expires:e})};$.cookie("noLanguageRedirect")?o():$(document).on("click",".js-part-language-switcher",o),(new FinanceLoanMobileSort).init()},document.querySelector(".theme--listing")&&(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//www.googletagservices.com/tag/js/gpt.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.googletag.cmd.push((function(){googletag.pubads().collapseEmptyDivs(!0),googletag.pubads().enableSyncRendering(),window.adSets={setA:[[970,250],[940,200],[970,90]],setB:[[728,90],[728,180]],setC:[300,250],setD:[[300,250],[300,600],[160,600]],setE:[[320,50],[320,100]],setF:[1,1],setG:[300,600],setH:[670,156],setI:[300,100],setJ:[[300,250],[300,300],[300,720],[300,600],[160,600]],setK:[[300,250],[300,600],[160,600]]}})),window.googletag.cmd.push((function(){for(var e in window.slots=window.slots||{},window.slots.listings_strip_banner_one={divId:"div-gpt-ad-1455072887849-0",name:"/6104461/carlist.my_search_438x146",dimensions:{desktop:"setB",mobile:"setE"}},window.slots.listings_strip_banner_five={divId:"div-gpt-ad-1469155301993-1",name:"/6104461/CL_Search_Strip_5th",dimensions:{desktop:"setB",mobile:"setC"}},slots)if(document.getElementById(slots[e].divId)){var t=googletag.sizeMapping(),o=[],n=null;if(slots[e].dimensions.desktop&&window.adSets[slots[e].dimensions.desktop])for(n in t=t.addSize([1024,0],window.adSets[slots[e].dimensions.desktop]),window.adSets[slots[e].dimensions.desktop])"string"==typeof window.adSets[slots[e].dimensions.desktop][n]?o.push(window.adSets[slots[e].dimensions.desktop]):o=o.concat(window.adSets[slots[e].dimensions.desktop]);if(slots[e].dimensions.mobile&&window.adSets[slots[e].dimensions.mobile])for(n in t=t.addSize([1,0],window.adSets[slots[e].dimensions.mobile]),window.adSets[slots[e].dimensions.mobile])"string"==typeof window.adSets[slots[e].dimensions.mobile][n]?o.push(window.adSets[slots[e].dimensions.mobile]):o=o.concat(window.adSets[slots[e].dimensions.mobile]);var a=googletag.defineSlot(slots[e].name,o,slots[e].divId);a&&a.defineSizeMapping(t.build()).setCollapseEmptyDiv(!0).addService(googletag.pubads())}var s=JSON.parse(document.querySelector('meta[name="ga:cad:list:make_model"]').getAttribute("content").replace(/'/g,'"'));s&&s.make&&(googletag.pubads().setTargeting("mymake",s.make),i=null,s.modelGroup?(i=make+" "+s.modelGroup,googletag.pubads().setTargeting("mymodel",i)):s.model&&(i=make+" "+s.model,googletag.pubads().setTargeting("mymodel",i))),(s=document.querySelector('meta[name="ga:cad:list:location"]').getAttribute("content"))&&googletag.pubads().setTargeting("mylocation",s);var i=document.querySelector('meta[name="ga:cad:list:page_source"]').getAttribute("content");"NA"!=s&&""!=s&&void 0!==s&&googletag.pubads().setTargeting("page_source",i),(i=document.querySelector('meta[name="ga:cad:list:keyword"]').getAttribute("content"))&&googletag.pubads().setTargeting("mykey",i),(i=document.querySelector('meta[name="ga:cad:list:ad_type"]').getAttribute("content"))&&googletag.pubads().setTargeting("mytype",i),(i=(i=document.querySelector('meta[name="ga:cad:list:bodytype"]'))?i.getAttribute("content"):null)&&googletag.pubads().setTargeting("mybodytype",i),-1<window.location.href.indexOf("kereta-murah")&&googletag.pubads().setTargeting("mykeretamurah","yes");var d="";if(void 0!==window.lotauds)for(var r=0;r<lotauds.Profile.Audiences.Audience.length;r++)0<r&&(d+=","),d+=lotauds.Profile.Audiences.Audience[r].abbr;d&&googletag.pubads().setTargeting("lotauds",[d]),(i=document.getElementsByTagName("html")[0].getAttribute("lang"))&&googletag.pubads().setTargeting("language","my"+i),googletag.pubads().setTargeting("mydevice",window.adDevice),googletag.pubads().enableSingleRequest(),googletag.pubads().enableAsyncRendering(),googletag.enableServices()})),window.googletag.cmd.push((function(){for(var e in window.slots=window.slots||[],slots)document.getElementById(slots[e].divId)&&slots[e].mapping&&googletag.display(slots[e].divId)})));